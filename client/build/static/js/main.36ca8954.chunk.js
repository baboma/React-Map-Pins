(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{288:function(e,t,n){e.exports=n(495)},495:function(e,t,n){"use strict";n.r(t);var a=n(24),r=n(0),i=n.n(r),o=n(32),c=n.n(o),l=n(498),u=n(500),s=n(501),m=n(26),p=n.n(m),d=n(40),f=n(25),g=n(44),h=n(17),E=n(39),b=n(192),v=n.n(b),y=n(94),x="https://tranquil-reef-69433.herokuapp.com/graphql",O=function(){var e=Object(r.useState)(""),t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(r.useEffect)(function(){var e=window.gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token;i(e)},[]),new y.GraphQLClient(x,{headers:{authorization:n}})},j=Object(r.createContext)({currentUser:null,isAuth:!1,draft:null,pins:[],currentPin:null,mapStyle:"mapbox://styles/mapbox/streets-v11"}),w=n(193),_=n.n(w),S=function(e){var t=e.size,n=e.color,a=e.onClick;return i.a.createElement(_.a,{onClick:a,style:{fontSize:t,color:n}})},N=n(28),C=n(196),I=n.n(C),T=n(195),k=n.n(T),A=Object(h.withStyles)(function(e){return{picture:{display:"flex",flexDirection:"row",marginTop:"1em"},root:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},icon:{margin:e.spacing.unit,fontSize:"35px"}}})(function(e){var t=e.classes,n=Object(r.useContext)(j),o=n.state,c=n.dispatch,l=Object(r.useState)(!0),u=Object(a.a)(l,2),s=u[0],m=u[1],p=i.a.createElement(N.a,{onClick:function(){c({type:"SET_STREETS",payload:"mapbox://styles/mapbox/streets-v11"}),m(!s)}},i.a.createElement("img",{src:"../../images/plan_map.png",alt:"plan map"})),d=i.a.createElement(N.a,{onClick:function(){c({type:"SET_SATELLITE",payload:"mapbox://styles/mapbox/satellite-v9"}),m(!s)}},i.a.createElement("img",{src:"../../images/satellite_map.png",alt:"satellite map"}));return i.a.createElement("div",null,i.a.createElement("div",{className:t.picture},s?d:p),i.a.createElement("div",{className:t.root},i.a.createElement(N.e,{noWrap:!0,component:"h2",variant:"h6",align:"center",color:"error",gutterBottom:!0},o.pins.length," ePostal cards created."),i.a.createElement(I.a,{className:t.icon}),i.a.createElement(N.e,{noWrap:!0,component:"h2",variant:"h6",align:"center",color:"textPrimary",gutterBottom:!0},"Click on the map to add a pin")),i.a.createElement("div",null,i.a.createElement(k.a,{forecast:"today",apikey:"f1b6f1dc028142c6a2324807191805",type:"auto"})))}),P=n(197),L=n.n(P),D=n(70),R=n.n(D),U=n(23),F=n.n(U),W=n(56),G=n.n(W),M=n(199),z=n.n(M),B=n(198),$=n.n(B),Y=n(95),q=n.n(Y),Q=n(200),J=n.n(Q),V=Object(h.withStyles)(function(e){return{form:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingBottom:e.spacing.unit},contentField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"95%"},input:{display:"none"},alignCenter:{display:"flex",alignItems:"center"},iconLarge:{fontSize:40,marginRight:e.spacing.unit},leftIcon:{fontSize:20,marginRight:e.spacing.unit},rightIcon:{fontSize:20,marginLeft:e.spacing.unit},button:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit,marginRight:e.spacing.unit,marginLeft:0}}})(function(e){var t=e.classes,n=Object(E.unstable_useMediaQuery)("(max-width: 650px)"),o=O(),c=Object(r.useContext)(j),l=c.state,u=c.dispatch,s=Object(r.useState)(""),m=Object(a.a)(s,2),f=m[0],g=m[1],h=Object(r.useState)(""),b=Object(a.a)(h,2),v=b[0],y=b[1],x=Object(r.useState)(""),w=Object(a.a)(x,2),_=w[0],S=w[1],N=Object(r.useState)(!1),C=Object(a.a)(N,2),I=C[0],T=C[1],k=function(){g(""),y(""),S(""),u({type:"DELETE_DRAFT"})},A=function(){var e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",v),t.append("upload_preset","geopins"),t.append("cloud_name","mandela"),e.next=6,L.a.post("https://api.cloudinary.com/v1_1/mandela/image/upload",t);case 6:return n=e.sent,e.abrupt("return",n.data.url);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(p.a.mark(function e(t){var n,a,r,i,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),T(!0),e.next=5,A();case 5:return n=e.sent,a=l.draft,r=a.latitude,i=a.longitude,c={title:f,image:n,content:_,latitude:r,longitude:i},e.next=10,o.request("\n  mutation($title: String!, $image: String!, $content: String!, $latitude: Float!, $longitude: Float!) {\n    createPin(input: {\n      title: $title,\n      image: $image,\n      content: $content,\n      latitude: $latitude,\n      longitude: $longitude\n    }) {\n      _id\n      createdAt\n      title \n      image\n      content\n      latitude\n      longitude\n      author {\n        _id\n        name\n        email\n        picture\n      }\n    }\n  }\n",c);case 10:k(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),T(!1),console.error("Error creating pin",e.t0);case 17:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("form",{className:t.form},i.a.createElement(F.a,{className:t.alignCenter,component:"h2",variant:"h4",color:"secondary"},i.a.createElement($.a,{className:t.iconLarge})," Pin Location"),i.a.createElement("div",null,i.a.createElement(R.a,{name:"title",label:"Title",placeholder:"Insert pin title",onChange:function(e){return g(e.target.value)}}),i.a.createElement("input",{accept:"image/*",id:"image",type:"file",className:t.input,onChange:function(e){return y(e.target.files[0])}}),i.a.createElement("label",{htmlFor:"image"},i.a.createElement(G.a,{style:{color:v&&"green"},component:"span",size:"small",className:t.button},i.a.createElement(z.a,null)))),i.a.createElement("div",{className:t.contentField},i.a.createElement(R.a,{name:"content",label:"Content",multiline:!0,rows:n?"3":"6",margin:"normal",fullWidth:!0,variant:"outlined",onChange:function(e){return S(e.target.value)}})),i.a.createElement("div",null,i.a.createElement(G.a,{onClick:k,className:t.button,variant:"contained",color:"primary"},i.a.createElement(q.a,{className:t.leftIcon}),"Discard"),i.a.createElement(G.a,{type:"submit",className:t.button,variant:"contained",color:"secondary",disabled:!f.trim()||!_.trim()||!v||I,onClick:P},"Submit",i.a.createElement(J.a,{className:t.rightIcon}))))}),Z=n(205),H=n.n(Z),X=n(204),K=n.n(X),ee=n(201),te=n.n(ee),ne=n(47),ae=n.n(ne),re=n(69),ie=n.n(re),oe=n(202),ce=n.n(oe),le=n(86),ue=n.n(le),se=Object(h.withStyles)(function(e){return{form:{display:"flex",alignItems:"center"},input:{marginLeft:8,flex:1},clearButton:{padding:0,color:"red"},sendButton:{padding:0,color:e.palette.secondary.dark}}})(function(e){var t=e.classes,n=O(),o=Object(r.useContext)(j).state,c=Object(r.useState)(""),l=Object(a.a)(c,2),u=l[0],s=l[1],m=function(){var e=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={pinId:o.currentPin._id,text:u},e.next=3,n.request("\n  mutation($pinId: ID!, $text: String!) {\n    createComment(pinId: $pinId, text: $text) {\n      _id\n      createdAt\n      title\n      content\n      image\n      latitude\n      longitude\n      author {\n        _id\n        name\n      }\n      comments {\n        text\n        createdAt\n        author {\n          name\n          picture\n        }\n      }\n    }\n  }\n",t);case 3:s("");case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{className:t.form},i.a.createElement(ie.a,{onClick:function(){return s("")},disabled:!u.trim(),className:t.clearButton},i.a.createElement(q.a,null)),i.a.createElement(ae.a,{className:t.input,placeholder:"Add Comment",multiline:!0,value:u,onChange:function(e){return s(e.target.value)}}),i.a.createElement(ie.a,{onClick:m,disabled:!u.trim(),className:t.sendButton},i.a.createElement(ce.a,null))),i.a.createElement(ue.a,null))}),me=n(68),pe=n.n(me),de=n(87),fe=n.n(de),ge=n(90),he=n.n(ge),Ee=n(88),be=n.n(Ee),ve=n(89),ye=n.n(ve),xe=n(203),Oe=n.n(xe),je=Object(h.withStyles)(function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}})(function(e){var t=e.comments,n=e.classes;return i.a.createElement(pe.a,{className:n.root},t.map(function(e,t){return i.a.createElement(fe.a,{key:t,alignItems:"flex-start"},i.a.createElement(be.a,null,i.a.createElement(ye.a,{src:e.author.picture,alt:e.author.name})),i.a.createElement(he.a,{primary:e.text,secondary:i.a.createElement(i.a.Fragment,null,i.a.createElement(F.a,{className:n.inline,component:"span",color:"textPrimary"},e.author.name)," ","\xb7 ",Oe()(Number(e.createdAt))," ago")}))}))}),we=Object(h.withStyles)(function(e){return{root:{padding:"1em 0.5em",textAlign:"center",width:"320px"},icon:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},text:{display:"flex",alignItems:"center",justifyContent:"center"}}})(function(e){var t=e.classes,n=Object(r.useContext)(j).state.currentPin,a=n.title,o=n.content,c=n.author,l=n.createdAt,u=n.comments;return i.a.createElement("div",{className:t.root},i.a.createElement(F.a,{component:"h2",variant:"h4",color:"primary",gutterBottom:!0},a),i.a.createElement(F.a,{className:t.text,component:"h3",variant:"h6",color:"inherit",gutterBottom:!0},i.a.createElement(K.a,{className:t.icon})," ",c.name),i.a.createElement(F.a,{className:t.text,variant:"subtitle2",color:"inherit",gutterBottom:!0},i.a.createElement(H.a,{className:t.icon}),te()(Number(l),"MMM Do, YYYY")),i.a.createElement(F.a,{variant:"subtitle1",gutterBottom:!0},o),i.a.createElement(se,null),i.a.createElement(je,{comments:u}))}),_e=Object(h.withStyles)({root:{minWidth:350,maxWidth:400,maxHeight:"calc(100vh - 64px)",overflowY:"scroll",display:"flex",justifyContent:"center"},rootMobile:{maxWidth:"100%",maxHeight:300,overflowX:"hidden",overflowY:"scroll"}})(function(e){var t,n=e.classes,a=Object(E.unstable_useMediaQuery)("(max-width: 650px)"),o=Object(r.useContext)(j).state,c=o.draft,l=o.currentPin;return c||l?c&&!l?t=V:!c&&l?t=we:l||(t=A):t=A,i.a.createElement(N.c,{className:a?n.rootMobile:n.root},i.a.createElement(t,null))}),Se=n(57),Ne=n(102),Ce=n(103),Ie=n.n(Ce);function Te(){var e=Object(Ne.a)(["\n  subscription {\n    pinDeleted {\n      _id\n    }\n  }\n"]);return Te=function(){return e},e}function ke(){var e=Object(Ne.a)(["\n  subscription {\n    pinUpdated {\n      _id\n      createdAt\n      title\n      content\n      image\n      latitude\n      longitude\n      author {\n        _id\n        name\n      }\n      comments {\n        text\n        createdAt\n        author {\n          name\n          picture\n        }\n      }\n    }\n  }\n"]);return ke=function(){return e},e}function Ae(){var e=Object(Ne.a)(["\n  subscription {\n    pinAdded {\n      _id\n      createdAt\n      title\n      image\n      content\n      latitude\n      longitude\n      author {\n        _id\n        name\n        email\n        picture\n      }\n      comments {\n        text\n        createdAt\n        author {\n          name\n          picture\n        }\n      }\n    }\n  }\n"]);return Ae=function(){return e},e}var Pe=Ie()(Ae()),Le=Ie()(ke()),De=Ie()(Te()),Re=function(){var e=Object(r.useContext)(j).dispatch;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Se.b,{subscription:Pe,onSubscriptionData:function(t){var n=t.subscriptionData.data.pinAdded;e({type:"CREATE_PIN",payload:n})}}),i.a.createElement(Se.b,{subscription:Le,onSubscriptionData:function(t){var n=t.subscriptionData.data.pinUpdated;e({type:"CREATE_COMMENT",payload:n})}}),i.a.createElement(Se.b,{subscription:De,onSubscriptionData:function(t){var n=t.subscriptionData.data.pinDeleted;e({type:"DELETE_PIN",payload:n})}}))},Ue=n(208),Fe=n.n(Ue),We=Object(h.withStyles)({locateUser:{position:"absolute",top:"44px",left:"calc(100vw - 410px)",margin:"1em",padding:"0.2em"}})(function(e){var t=e.classes,n=e.getUserPosition;return i.a.createElement(i.a.Fragment,null,i.a.createElement(N.d,{title:"Show your location",placement:"left"},i.a.createElement(N.b,{className:t.locateUser,onClick:n},i.a.createElement(Fe.a,null))))}),Ge=n(209),Me=n.n(Ge),ze=function(e){var t=e.classes,n=e.handleDeletePin,a=e.isAuthUser,r=e.popup,o=e.closePopup;return i.a.createElement(g.c,{anchor:"top",latitude:r.latitude,longitude:r.longitude,closeOnClick:!1,onClose:function(){return o()}},i.a.createElement("img",{className:t.popupImage,src:r.image,alt:r.title}),i.a.createElement("div",{className:t.popupTab},i.a.createElement(N.e,null,"lat:"," ",r.latitude.toFixed(6),", long:"," ",r.longitude.toFixed(6)),a()&&i.a.createElement(N.a,{onClick:function(){return n(r)}},i.a.createElement(Me.a,{className:t.deleteIcon}))))},Be={latitude:45.5016889,longitude:-73.567256,zoom:13},$e=Object(h.withStyles)({root:{display:"flex"},rootMobile:{display:"flex",flexDirection:"column-reverse"},navigationControl:{position:"absolute",top:0,left:0,margin:"1em"},locateUser:{position:"absolute",top:"44px",left:"calc(100vw - 410px)",margin:"1em",padding:"0.2em"},deleteIcon:{color:"red"},popupImage:{padding:"0.4em",height:200,width:200,objectFit:"cover"},popupTab:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}})(function(e){var t=e.classes,n=O(),o=Object(E.unstable_useMediaQuery)("(max-width: 650px)"),c=Object(r.useContext)(j),l=c.state,u=c.dispatch;Object(r.useEffect)(function(){k()},[]);var s=Object(r.useState)(Be),m=Object(a.a)(s,2),h=m[0],b=m[1],y=Object(r.useState)(null),x=Object(a.a)(y,2),w=x[0],_=x[1],N=Object(r.useState)(null),C=Object(a.a)(N,2),I=C[0],T=C[1];Object(r.useEffect)(function(){I&&l.pins.findIndex(function(e){return e._id===I._id})>-1||T(null)},[I,l.pins,l.pins.length]);var k=function(){var e=Object(d.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.request("\n  {\n    getPins {\n      _id\n      createdAt\n      title\n      image\n      content\n      latitude\n      longitude\n      author {\n        _id\n        name\n        email\n        picture\n      }\n      comments {\n        text\n        createdAt\n        author {\n          _id \n          name\n          picture\n        }\n      }\n    }\n  }\n");case 2:t=e.sent,a=t.getPins,u({type:"GET_PINS",payload:a});case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),A=function(e){return v()(Date.now(),Number(e.createdAt))<=30?"limegreen":"darkblue"},P=function(){var e=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={pinId:t._id},e.next=3,n.request("\n  mutation($pinId: ID!) {\n    deletePin(pinId: $pinId) {\n      _id\n    }\n  }\n",a);case 3:T(null);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),L=l.pins.map(function(e){return i.a.createElement(g.a,{key:e._id,latitude:e.latitude,longitude:e.longitude,offsetLeft:-19,offsetTop:-37},i.a.createElement(S,{onClick:function(){return function(e){T(e),u({type:"SET_PIN",payload:e})}(e)},size:40,color:A(e)}))});return i.a.createElement("div",{className:o?t.rootMobile:t.root},i.a.createElement(g.d,Object.assign({width:"100vw",height:"calc(100vh - 64px)",mapStyle:l.mapStyle,mapboxApiAccessToken:"pk.eyJ1IjoibWFyZ29yYW0iLCJhIjoiY2p2bjAzdXFmMWlxYTQzcW9lNzV1Y2VidyJ9.s8NZnrn0FJaEKUQoJ9e36A",scrollZoom:!o,onViewportChange:function(e){return b(e)},onClick:function(e){var t=e.lngLat;if(e.leftButton){l.draft||u({type:"CREATE_DRAFT"});var n=Object(a.a)(t,2),r=n[0],i=n[1];u({type:"UPDATE_DRAFT_LOCATION",payload:{longitude:r,latitude:i}})}}},h),i.a.createElement("div",{className:t.navigationControl},i.a.createElement(g.b,{onViewportChange:function(e){return b(e)}})),w&&i.a.createElement(g.a,{latitude:w.latitude,longitude:w.longitude,offsetLeft:-19,offsetTop:-37},i.a.createElement(S,{size:40,color:"red"})),l.draft&&i.a.createElement(g.a,{latitude:l.draft.latitude,longitude:l.draft.longitude,offsetLeft:-19,offsetTop:-37},i.a.createElement(S,{size:40,color:"hotpink"})),L,I&&i.a.createElement(ze,{classes:t,handleDeletePin:P,isAuthUser:function(){return l.currentUser._id===I.author._id},popup:I,closePopup:function(){T(null),u({type:"SET_PIN_NULL"})}})),i.a.createElement(We,{getUserPosition:function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(e){var t=e.coords,n=t.latitude,a=t.longitude;b(Object(f.a)({},h,{latitude:n,longitude:a})),_({latitude:n,longitude:a})})}}),i.a.createElement(Re,null),i.a.createElement(_e,null))}),Ye=n(104),qe=n.n(Ye),Qe=n(105),Je=n.n(Qe),Ve=n(91),Ze=n.n(Ve),He=Object(h.createMuiTheme)({palette:{primary:{light:qe.a[300],main:qe.a[500],dark:qe.a[700]},secondary:{light:Je.a[300],main:Je.a[500],dark:Je.a[700]}},typography:{useNextVariants:!0}});var Xe=function(e){return function(t){return i.a.createElement(h.MuiThemeProvider,{theme:He},i.a.createElement(Ze.a,null),i.a.createElement(e,t))}}(function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement($e,null))}),Ke=n(499),et=n(98),tt=Object(h.withStyles)({root:{flexGrow:1},logo:{height:"80vh",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}})(function(e){var t=e.classes,n=Object(r.useContext)(j).dispatch,a=function(){var e=Object(d.a)(p.a.mark(function e(t){var a,r,i,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.getAuthResponse().id_token,r=new y.GraphQLClient(x,{headers:{authorization:a}}),e.next=5,r.request("\n{\n  me {\n    _id\n\t\tname\n\t\temail\n\t\tpicture\n  }\n}\n");case 5:i=e.sent,c=i.me,n({type:"LOGIN_USER",payload:c}),n({type:"IS_LOGGED_IN",payload:t.isSignedIn()}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),o(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),o=function(e){console.error("Error logging in",e),n({type:"IS_LOGGED_IN",payload:!1})};return i.a.createElement("div",{className:t.logo},i.a.createElement(F.a,{component:"h1",variant:"h3",gutterBottom:!0,noWrap:!0,style:{color:"#4285f4"}},"Welcome"),i.a.createElement(et.GoogleLogin,{clientId:"71269275933-tbf0sp5p8tbprfvhpmjve981susv0ell.apps.googleusercontent.com",onSuccess:a,onFailure:o,isSignedIn:!0,buttonText:"Login with Google",theme:"dark"}),i.a.createElement(F.a,{component:"h1",variant:"h3",gutterBottom:!0,noWrap:!0,style:{color:"#34495E",marginTop:".5em"}},"Please share an ePostal card..."))}),nt=function(){return Object(r.useContext)(j).state.isAuth?i.a.createElement(Ke.a,{to:"/"}):i.a.createElement(tt,null)},at=n(214),rt=function(e){var t=e.component,n=Object(at.a)(e,["component"]),a=Object(r.useContext)(j).state;return i.a.createElement(s.a,Object.assign({render:function(e){return a.isAuth?i.a.createElement(t,e):i.a.createElement(Ke.a,{to:"/login"})}},n))},it=n(213);function ot(e,t){var n=t.type,a=t.payload;switch(n){case"LOGIN_USER":return Object(f.a)({},e,{currentUser:a});case"IS_LOGGED_IN":return Object(f.a)({},e,{isAuth:a});case"SIGNOUT_USER":return Object(f.a)({},e,{isAuth:!1,currentUser:null});case"CREATE_DRAFT":return Object(f.a)({},e,{currentPin:null,draft:{latitude:0,longitude:0}});case"UPDATE_DRAFT_LOCATION":return Object(f.a)({},e,{draft:a});case"DELETE_DRAFT":return Object(f.a)({},e,{draft:null});case"GET_PINS":return Object(f.a)({},e,{pins:a});case"CREATE_PIN":var r=a,i=e.pins.filter(function(e){return e._id!==r._id});return Object(f.a)({},e,{pins:[].concat(Object(it.a)(i),[r])});case"SET_PIN":return Object(f.a)({},e,{currentPin:a,draft:null});case"DELETE_PIN":var o=a,c=e.pins.filter(function(e){return e._id!==o._id});if(e.currentPin)if(o._id===e.currentPin._id)return Object(f.a)({},e,{pins:c,currentPin:null});return Object(f.a)({},e,{pins:c});case"CREATE_COMMENT":var l=a,u=e.pins.map(function(e){return e._id===l._id?l:e});return Object(f.a)({},e,{pins:u,currentPin:l});case"SET_PIN_NULL":return Object(f.a)({},e,{currentPin:null});case"SET_SATELLITE":case"SET_STREETS":return Object(f.a)({},e,{mapStyle:a});default:return e}}n(480),n(481);var ct=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function lt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ut=n(59),st=n(212),mt=n(215),pt=n(92),dt=n.n(pt),ft=n(93),gt=n.n(ft),ht=n(211),Et=n.n(ht),bt=n(210),vt=n.n(bt),yt=Object(h.withStyles)({root:{cursor:"pointer",display:"flex"},buttonText:{color:"orange"},buttonIcon:{marginLeft:"5px",color:"orange"}})(function(e){var t=e.classes,n=Object(E.unstable_useMediaQuery)("(max-width: 650px)"),a=Object(r.useContext)(j).dispatch;return i.a.createElement(et.GoogleLogout,{onLogoutSuccess:function(){a({type:"SIGNOUT_USER"}),console.log("Signed out user")},render:function(e){var a=e.onClick;return i.a.createElement("span",{className:t.root,onClick:a},i.a.createElement(F.a,{style:{display:n?"none":"block"},variant:"body1",className:t.buttonText},"Signout"),i.a.createElement(vt.a,{className:t.buttonIcon}))}})}),xt=Object(h.withStyles)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1,display:"flex",alignItems:"center"},grow1:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end"},margin:{marginRight:e.spacing.unit},icon:{marginRight:e.spacing.unit,color:"green",fontSize:40},mobile:{display:"none"},picture:{height:"30px",borderRadius:"90%",marginRight:2*e.spacing.unit}}})(function(e){var t=e.classes,n=Object(E.unstable_useMediaQuery)("(max-width: 650px)"),a=Object(r.useContext)(j).state.currentUser;return i.a.createElement("div",{className:t.root},i.a.createElement(dt.a,{position:"static"},i.a.createElement(gt.a,null,i.a.createElement("div",{className:t.grow},i.a.createElement(Et.a,{className:t.icon}),i.a.createElement(F.a,{className:n?t.mobile:"",component:"h1",variant:"h6",color:"inherit",noWrap:!0},"React Map Pins")),a&&i.a.createElement("div",{className:t.grow1},i.a.createElement("img",{className:t.picture,src:a.picture,alt:a.name}),i.a.createElement(F.a,{className:n?t.mobile:t.margin,variant:"h6",color:"inherit",noWrap:!0},a.name),i.a.createElement(yt,null)))))}),Ot=new st.a({uri:"wss://tranquil-reef-69433.herokuapp.com/graphql",options:{reconnect:!0}}),jt=new ut.a({link:Ot,cache:new mt.a});c.a.render(i.a.createElement(function(){var e=Object(r.useContext)(j),t=Object(r.useReducer)(ot,e),n=Object(a.a)(t,2),o=n[0],c=n[1];return i.a.createElement(l.a,null,i.a.createElement(Se.a,{client:jt},i.a.createElement(j.Provider,{value:{state:o,dispatch:c}},i.a.createElement(xt,null),i.a.createElement(u.a,null,i.a.createElement(rt,{exact:!0,path:"/",component:Xe}),i.a.createElement(s.a,{path:"/login",component:nt})))))},null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");ct?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):lt(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):lt(t,e)})}}()}},[[288,1,2]]]);
//# sourceMappingURL=main.36ca8954.chunk.js.map